@using Entities.Concrete
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@foreach (var item in (List<UserTableDto>)ViewData["users"])
{
    <div class="listContainerThere"
         style="border-bottom: 5px solid #9cfc02;border-left: 5px solid #1dffec;border-top: 5px solid #9cfc02;border-right: 5px solid #1dffec;">


        <h2 class="listContainerTitle"> @item.Name / @item.SurName </h2>


        <div class="listContainerInThree">

            <div>

                <p class="lisContainerP">User Name : @item.UserName</p>

                <div>

                    <button class="deleteButton" onclick="deleteUser('@item.Id')">
                        Delete
                    </button>

                    <button class="updateButton" onclick="updateUser('@item.Id')">
                        Update
                    </button>


                </div>

            </div>
        </div>

    </div>
}

<script>

    async function deleteUser(userId) {
    // Swal onay penceresini göster
    const result = await Swal.fire({
        title: 'Are you sure?',
        text: 'Do you really want to delete this user?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'No, cancel!'
    });

    // Kullanıcı onay verdiyse, yönlendirme işlemini gerçekleştir
    if (result.isConfirmed) {
        // Yönlendirme URL'sini oluştur
            const redirectUrl = `/User/DeleteUser?id=${userId}`;

        // Kullanıcıyı yönlendir
        window.location.href = redirectUrl;
    }
    }

    async function updateUser(userId){
        const redirectUrl = `/User/Update?id=${userId}`;

        // Kullanıcıyı yönlendir
        window.location.href = redirectUrl;
    }
</script>